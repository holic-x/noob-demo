package com.noob.algorithm.daily.archive.plan02.day07.p019;

import java.util.Arrays;

/**
 * ğŸŸ¢ 1005 Kæ¬¡å–ååæœ€å¤§åŒ–çš„æ•°ç»„å’Œ - https://leetcode.cn/problems/maximize-sum-of-array-after-k-negations/description/
 */
public class Solution1005_03 {

    /**
     * æ€è·¯åˆ†æï¼šé€‰æ‹©æŸä¸ªä½ç½®è¿›è¡Œå–åï¼Œéœ€æ‰§è¡Œkæ¬¡å–åæ“ä½œï¼Œå¯ä»¥å¤šæ¬¡é€‰æ‹©åŒä¸€ä¸ªä¸‹æ ‡iï¼ŒåŸºäºæ­¤æ“ä½œè¿”å›æ•°æ®å¯èƒ½çš„æœ€å¤§å’Œ
     * è´ªå¿ƒæ€è·¯ï¼šå¦‚æœæ•°ç»„å…ƒç´ ä¸­å­˜åœ¨è´Ÿæ•°ï¼Œåˆ™ä¼˜å…ˆå°½å¯èƒ½å°†è´Ÿæ•°è½¬åŒ–ä¸ºæ­£æ•°
     * - ä¼˜å…ˆè½¬åŒ–æœ€å°çš„è´Ÿæ•°ï¼Œå¦‚æœæ•°ç»„ä¸­æ‰€æœ‰çš„è´Ÿæ•°è½¬åŒ–åkè¿˜æœ‰å‰©ä½™ï¼Œåˆ™é€‰æ‹©ä¸€ä¸ªæœ€å°çš„æ­£æ•°è¿›è¡Œä¸€æ­£ä¸€è´ŸæŠµæ¶ˆæ“ä½œå¤„ç†ï¼ˆå‰©ä½™kä¸ºå¶æ•°ç›´æ¥æŠµæ¶ˆï¼Œå‰©ä½™kä¸ºå¥‡æ•°åˆ™æœ€å°æ­£æ•°å–åï¼‰
     */
    public int largestSumAfterKNegations(int[] nums, int k) {
        // â‘  å¯¹æ•°ç»„å…ƒç´ è¿›è¡Œæ’åº
        Arrays.sort(nums);
        // â‘¡ å¤„ç†kæ¬¡å–å
        int sum = 0;
        int curMin = Integer.MAX_VALUE; // ç»´æŠ¤æœ€å°å€¼
        for (int i = 0; i < nums.length; i++) {
            // å¦‚æœä¸ºè´Ÿæ•°ä¸”kæœ‰å‰©ä½™åˆ™æ‰§è¡Œå–å
            if (nums[i] < 0 && k > 0) {
                nums[i] *= -1;
                k--;
            } else {
                // break; // æ‰€æœ‰è´Ÿæ•°å¤„ç†å®Œæˆæˆ–è€…kä¸è¶³äº†ï¼Œåˆ™è·³å‡ºå¤„ç†
            }
            // ç»´æŠ¤ç›®å‰æ•°ç»„çš„æœ€å°å€¼
            curMin = Math.min(curMin, nums[i]);
            // éå†è¿‡ç¨‹ç´¯åŠ å’Œ
            sum += nums[i];
        }
        // â‘¢ æ ¡éªŒå‰©ä½™k
        if (k > 0) {
            if (k % 2 == 0) {
                return sum; // å‰©ä½™kä¸ºå¶æ•°ï¼Œæ— è®ºé€‰æ‹©ä»€ä¹ˆå…ƒç´ éƒ½æ˜¯ä¸€æ­£ä¸€è´ŸæŠµæ¶ˆï¼Œå› æ­¤è¿”å›ç»“æœå³ä¸ºä¸Šè¿°æ“ä½œå¤„ç†ç»“æœ
            } else {
                // é€‰æ‹©ç›®å‰æ•°ç»„çš„æœ€å°æ•°å–å
                return sum - 2 * curMin;
            }
        }
        // è¿”å›ç»“æœ
        return sum;
    }

}
