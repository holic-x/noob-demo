package com.noob.algorithm.daily.archive.plan01.day26;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

/**
 * ğŸŸ¡763 åˆ’åˆ†å­—æ¯åŒºé—´ - https://leetcode.cn/problems/partition-labels/
 */
public class Solution763_02 {

    /**
     * æ€è·¯åˆ†æï¼šå…³æ³¨ã€æ¯ä¸ªå­—æ¯æœ€å¤šå‡ºç°åœ¨ä¸€ä¸ªç‰‡æ®µä¸­ã€‘è¿™ä¸ªåˆ‡å‰²æ¡ä»¶
     * - â‘  å¯èƒ½çš„åˆ‡å‰²ä½ç½®ï¼šæ¯ä¸ªå­—æ¯çš„æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®
     * - â‘¡ å®é™…çš„åˆ‡å‰²ä½ç½®ï¼šå·²å‡ºç°çš„å­—æ¯åºåˆ—ä¸­çš„æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®çš„æœ€å¤§å€¼ï¼Œå½“éå†åˆ°è¿™ä¸ªä½ç½®å¯ä»¥è¿›è¡Œåˆ‡å‰²ï¼ˆå¯ä»¥ç¡®ä¿å­—æ¯åªåœ¨å½“å‰ç‰‡æ®µä¸­å‡ºç°ï¼‰
     */
    public List<Integer> partitionLabels(String s) {
        // ç¬¬1æ¬¡éå†ï¼šç»Ÿè®¡æ¯ä¸ªå­—æ¯å­—ç¬¦çš„æœ€åä¸€æ¬¡çš„å‡ºç°ä½ç½®
        Map<Character, Integer> map = new HashMap<>();
        for (int i = 0; i < s.length(); i++) {
            map.put(s.charAt(i), i);
        }

        List<Integer> res = new ArrayList<>();

        // ç¬¬2æ¬¡éå†ï¼šå¯»æ‰¾å®é™…çš„åˆ‡å‰²ä½ç½®
        int cutIdx = 0; // å­˜å‚¨å·²å‡ºç°çš„å­—æ¯åºåˆ—ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®çš„æœ€å¤§å€¼ï¼ˆåˆ‡å‰²ä½ç½®ä¼šéšç€éå†å…ƒç´ çš„å‡ºç°ä¸æ–­æ›´æ–°ï¼‰
        int startIdx = 0; // è®°å½•å½“å‰åˆ‡å‰²çš„èµ·å§‹ç‚¹ï¼Œç”¨äºåˆ’åˆ†åˆ‡å‰²åŒºåŸŸï¼ˆæ¯æ¬¡åˆ‡å‰²åè¿›è¡Œæ›´æ–°ï¼‰
        for (int i = 0; i < s.length(); i++) {
            // æ›´æ–°å·²å‡ºç°çš„å­—æ¯çš„å‡ºç°ä½ç½®çš„æœ€å¤§å€¼
            cutIdx = Math.max(cutIdx, map.get(s.charAt(i)));
            if (i == cutIdx) {
                // å¦‚æœéå†åˆ°å½“å‰çš„æœ€å¤§åˆ‡å‰²ä½ç½®ï¼Œåˆ™è¿›è¡Œåˆ‡å‰²æ“ä½œ
                res.add(i - startIdx + 1);
                startIdx = i + 1; // é€‰æ‹©åˆ‡å‰²ï¼Œæ›´æ–°ä¸‹ä¸€ä¸ªåˆ‡å‰²èŒƒå›´çš„èµ·å§‹ç‚¹
            }
        }

        // è¿”å›ç»“æœ
        return res;
    }
}
