package com.noob.algorithm.daily.plan01.archive.day11;

import com.noob.algorithm.dmsxl.baseStructure.tree.TreeNode;

/**
 * ğŸŸ¢110 å¹³è¡¡äºŒå‰æ ‘
 */
public class Solution110_02 {

    // DFS:å¹³è¡¡äºŒå‰æ ‘æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦å·®ä¸è¶…è¿‡1ï¼ˆè¶…å‡º1è¯´æ˜éå¹³è¡¡ï¼‰
    public boolean isBalanced(TreeNode root) {
        int validRes = depth(root);
        return validRes != -1; // å¦‚æœå¾—åˆ°-1åˆ™è¯´æ˜æ ‘ä¸å¹³è¡¡ï¼Œå¦åˆ™è¿”å›çš„æ˜¯æ­£ç¡®çš„æ ‘é«˜åº¦
    }

    /**
     * åŸºäºå¹³è¡¡äºŒå‰æ ‘çš„ç‰¹æ€§ï¼šæ ¸å¿ƒæ€è·¯æ˜¯æ ¡éªŒæ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„é«˜åº¦å·®æ˜¯å¦å¤§äº1
     * 1.é€’å½’éå†æ¯ä¸ªèŠ‚ç‚¹ï¼Œåˆ¤æ–­æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„é«˜åº¦å·®æ˜¯å¦å¤§äº1
     * 2.å®šä¹‰è®¡ç®—èŠ‚ç‚¹é«˜åº¦æ–¹æ³•ï¼ˆå³æ±‚èŠ‚ç‚¹çš„æœ€å¤§æ·±åº¦ï¼‰
     * - å®é™…ä¸Šä¸Šè¿°æ¶‰åŠåˆ°ä¸¤ä¸ªé€’å½’è°ƒç”¨çš„è¿‡ç¨‹ï¼Œå¯ä»¥è€ƒè™‘å°†å…¶æ•´ç†ä¸º1ä¸ªé€’å½’è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´é€’å½’è®¡ç®—å­æ ‘é«˜åº¦çš„åŒæ—¶åˆ¤æ–­é«˜åº¦å·®
     * å¦‚æœé«˜åº¦å·®å¤§äº1ï¼Œåˆ™ç›´æ¥è¿”å›-1ï¼ˆä¸€ä¸ªæ‰§è¡Œçš„æ ‡è¯†ï¼‰ï¼ˆå°†-1é€æ­¥é€’å½’å¾€ä¸ŠæŠ›ï¼‰ï¼Œå¦‚æœéå†å‘ç°å­˜åœ¨-1çš„é«˜åº¦è¯´æ˜ä¸å¹³è¡¡åˆ™ç›´æ¥è¿”å›false
     */
    public int depth(TreeNode node) {
        if (node == null) {
            return 0;
        }
        // è®¡ç®—å·¦å³å­æ ‘çš„é«˜åº¦
        int leftDepth = depth(node.left);
        int rightDepth = depth(node.right);

        // æ ¡éªŒå·¦å³å­æ ‘çš„é«˜åº¦æ˜¯å¦æœ‰æ•ˆï¼ˆå¦‚æœå‡ºç°-1ï¼Œè¯´æ˜å‡ºç°äº†ä¸å¹³è¡¡ï¼Œåˆ™ç»§ç»­å°†å…¶ç›´æ¥æŠ›å‡ºï¼‰
        if (leftDepth == -1 || rightDepth == -1) {
            return -1;
        }

        // æ ¡éªŒå½“å‰èŠ‚ç‚¹å·¦å³å­æ ‘é«˜åº¦å·®æ˜¯å¦å¤§äº1ï¼ˆå¦‚æœå¤§äº1åˆ™è¿”å›-1ï¼Œç”¨äºæ ‡è®°å½“å‰å­æ ‘ä¸å¹³è¡¡ï¼‰
        if (Math.abs(leftDepth - rightDepth) > 1) {
            return -1;
        }

        // å¦‚æœå½“å‰å·¦å³å­æ ‘çš„é«˜åº¦æœ‰æ•ˆï¼Œåˆ™ç»§ç»­è¿”å›æ­£ç¡®çš„é«˜åº¦å€¼
        return Math.max(leftDepth, rightDepth) + 1;
    }

}
