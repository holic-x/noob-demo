package com.noob.algorithm.daily.plan01.day05;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

/**
 * ğŸŸ¡015 ä¸‰æ•°ä¹‹å’Œ ï¼ˆå‰ªæä¼˜åŒ–ï¼‰
 */
public class Solution015_02 {

    /**
     * ã€æ’åº+åŒæŒ‡é’ˆã€‘ï¼šä»ä¸€ä¸ªæ•´æ•°æ•°ç»„`nums`ä¸­è·å–åˆ°æ»¡è¶³`x+y+z=0`ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„
     * - â‘  å¯¹`nums`è¿›è¡Œæ’åºï¼ˆä¸ºäº†ä¾¿äºé€šè¿‡æŒ‡é’ˆå®šä½ä¸‰å…ƒç»„ï¼‰
     * - â‘¡ å¤–å±‚å›ºå®š`i`ï¼Œå†…å±‚é€šè¿‡åŒæŒ‡é’ˆåˆ†åˆ«ä»å‰©ä½™çš„åºåˆ—çš„å¤´å°¾å‘ä¸­é—´é æ‹¢å¯»æ‰¾ä¸‰å…ƒç»„(æ ¹æ®å½“å‰ç»„åˆå’Œå†³å®šæŒ‡é’ˆæ›´æ–°æ–¹å‘)
     */
    public List<List<Integer>> threeSum(int[] nums) {
        // å®šä¹‰ç»“æœé›†
        List<List<Integer>> res = new ArrayList<>();
        // â‘  å¯¹numsæ’åº
        Arrays.sort(nums);
        // â‘¡ éå†æ£€ç´¢ä¸‰å…ƒç»„ï¼ˆå¤–å±‚å›ºå®šiï¼Œå†…å±‚ä»å‰©ä½™åºåˆ—çš„å¤´å°¾å‡ºå‘ï¼Œå®šä½ä¸‰å…ƒç»„ï¼‰
        for (int i = 0; i < nums.length - 2; i++) { // ä¸‰å…ƒç»„ï¼Œæ‰€ä»¥iå–å€¼èŒƒå›´ä¸º[0,n-2ï¼‰
            // å‰ªæâ‘ ï¼šnumsåœ¨å‰é¢è¿›è¡Œäº†æ’åºï¼Œå¦‚æœå›ºå®šçš„nums[i]>0,åˆ™åé¢çš„æ•°åªä¼šæ›´å¤§ä¸å¯èƒ½æ„æˆä¸‰å…ƒç»„å’Œä¸º0ï¼Œç›´æ¥è·³è¿‡
            if (nums[i] > 0) {
                continue;
            }

            // å‰ªæâ‘¡ï¼šå¦‚æœå‡ºç°é‡å¤ä¸‰å…ƒç»„åˆ™è·³è¿‡ï¼ˆnumså·²ç»ç¡®å®šäº†æœ‰åºï¼Œå› æ­¤æ­¤å¤„å¦‚æœæ ¡éªŒä¸‰å…ƒç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ç›¸åŒçš„è¯ï¼Œå·²ç»å…ˆå‡ºç°çš„å…ƒç´ æƒ…å†µè¦†ç›–äº†ï¼Œä¸éœ€è¦é‡å¤å¤„ç†ï¼‰
            if (i > 0 && nums[i] == nums[i - 1]) {
                continue; // ä¾‹å¦‚[-1,-1,0,0]: ç¬¬ä¸€ä¸ªå…ƒç´ ä¸º-1çš„æ»¡è¶³ä¸‰å…ƒç»„çš„æƒ…å†µå·²ç»åœ¨å‰é¢å°±ç¡®å®šäº†ï¼Œå¦‚æœå‘ç°ç›¸é‚»ç›¸åŒçš„è¯åˆ™è·³è¿‡
            }

            // æ„å»ºåŒæŒ‡é’ˆï¼Œæ£€ç´¢æ»¡è¶³æ¡ä»¶çš„ä¸‰å…ƒç»„
            int left = i + 1, right = nums.length - 1;
            while (left < right) {
                // å®šä¹‰ä¸´æ—¶ä¸‰å…ƒç»„é›†åˆ
                int curSum = nums[i] + nums[left] + nums[right];
                // æ ¡éªŒæ˜¯å¦æ»¡è¶³ä¸‰å…ƒç»„æ¡ä»¶
                if (curSum == 0) {
                    // res çš„å»é‡æ ¡éªŒï¼ˆcontainsï¼‰é€šè¿‡å‰ªææ¥å¤„ç†ï¼Œæ­¤å¤„å¯ä»¥ç›´æ¥åŠ å…¥
                    res.add(Arrays.asList(nums[i], nums[left], nums[right]));

                    // æœ¬æ¬¡å¤„ç†å®Œæˆï¼ŒæŒ‡é’ˆç§»åŠ¨ï¼Œç»§ç»­ä¸‹ä¸€ä¸ªä¸‰å…ƒç»„éå†
                    left++;
                    right--;

                    // å‰ªæâ‘¢ï¼š[y,z]çš„é€‰æ‹©ï¼Œå¦‚æœyã€zå‡ºç°è¿ç»­é‡å¤åˆ™è·³è¿‡ï¼ˆå› ä¸ºåœ¨å‰é¢çš„å¤„ç†ä¸­å·²å”¯ä¸€ç¡®å®šï¼‰
                    while (left < right && nums[left - 1] == nums[left]) { // å·¦æŒ‡é’ˆæ§åˆ¶ï¼šyé‡å¤åˆ™è·³è¿‡
                        left++;
                    }
                    while (left < right && nums[right] == nums[right + 1]) { // å³æŒ‡é’ˆæ§åˆ¶ï¼šzé‡å¤åˆ™è·³è¿‡
                        right--;
                    }
                } else if (curSum < 0) {
                    left++; // curSum<0ï¼Œè¦è®©å…¶å˜å¤§æ‰å¯èƒ½æ¥è¿‘target
                } else if (curSum > 0) {
                    right--;  // curSum>0ï¼Œè¦è®©å…¶å˜å°æ‰å¯èƒ½æ¥è¿‘target
                }
            }
        }

        // è¿”å›æœ€ç»ˆç»“æœ
        return res;
    }
}
