package com.noob.algorithm.daily.plan03.hot100_random.day02.p003;

import java.util.HashSet;
import java.util.Set;

/**
 * ğŸŸ¢ 202 å¿«ä¹æ•° - https://leetcode.cn/problems/happy-number/description/
 * æ¦‚è¦ï¼šå¯¹äºæ¯ä¸ªæ­£æ•´æ•°ï¼Œæ¯æ¬¡å°†è¯¥æ•°æ›¿æ¢ä¸ºå®ƒæ¯ä¸ªä½ç½®ä¸Šçš„æ•°å­—çš„å¹³æ–¹å’Œï¼Œé‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°æ•°å˜ä¸º1ï¼ˆä¹Ÿå¯èƒ½æ˜¯æ— é™å¾ªç¯å§‹ç»ˆå˜ä¸åˆ°1ï¼‰ï¼Œå¦‚æœç»“æœä¸º1åˆ™ä¸ºå¿«ä¹æ•°
 */
public class Solution202_01 {

    /**
     * æ€è·¯åˆ†æï¼š
     * ä»åˆå§‹æ•°å­—å¼€å§‹ï¼Œè®¡ç®—å…¶ä¸‹ä¸€ä¸ªæ•°nextNï¼Œéšååˆ¤æ–­æ•°å­—æ˜¯å¦å‡ºç°è¿‡ï¼Œå¦‚æœå‡ºç°è¿‡åˆ™è¯´æ˜ä¼šé™·å…¥å¾ªç¯
     */
    public boolean isHappy(int n) {
        // å®šä¹‰é›†åˆå­˜å‚¨å·²ç»å‡ºç°è¿‡çš„æ•°å­—
        Set<Integer> set = new HashSet<>();
        // å½“æ²¡æœ‰å‡ºç°æ•°å­—1åˆ™ä¸€ç›´å¾ªç¯å¯»æ‰¾
        while (n != 1) {
            n = nextN(n);
            // æ ¡éªŒæ•°å­—æ˜¯å¦å·²ç»å‡ºç°è¿‡
            if (set.contains(n)) {
                return false; // é™·å…¥å¾ªç¯ï¼Œéå¿«ä¹æ•°
            }
            set.add(n);
        }

        // æ­£å¸¸è·³å‡ºå¾ªç¯ï¼ŒéªŒè¯ä¸ºå¿«ä¹æ•°
        return true;
    }

    // æ•°ä½åˆ†ç¦»ï¼šè·å–nçš„ä¸‹ä¸€ä¸ªæ•°
    private int nextN(int n) {
        int ans = 0;
        while (n != 0) {
            int x = n % 10; // è·å–ä¸ªä½æ•°å­—
            ans += x * x; // ç´¯è®¡æ•°ä½å¹³æ–¹å’Œ
            n = n / 10; // æˆªå–æ‰ä¸ªä½æ•°ï¼Œç»§ç»­è¿›è¡Œè¿ç®—
        }
        // è¿”å›ç»“æœ
        return ans;
    }
}
