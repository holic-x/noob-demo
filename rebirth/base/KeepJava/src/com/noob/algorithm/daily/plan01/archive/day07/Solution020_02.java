package com.noob.algorithm.daily.plan01.archive.day07;

import java.util.HashMap;
import java.util.Map;
import java.util.Stack;

/**
 * ğŸŸ¢ 020 æœ‰æ•ˆçš„æ‹¬å·
 */
public class Solution020_02 {
    /**
     * æ ˆï¼šå€ŸåŠ©æ ˆå…ˆå…¥åå‡ºçš„ç‰¹æ€§
     * å°†æ‰€æœ‰å·¦æ‹¬å·å…¥æ ˆï¼Œå½“é‡åˆ°éå·¦æ‹¬å·å­—ç¬¦çš„æ—¶å€™åˆ™ä¾æ¬¡å¼¹å‡ºå¹¶åŒ¹é…æ˜¯å¦æ»¡è¶³
     * - å¦‚æœæ ¡éªŒè¿‡ç¨‹ä¸­å‘ç°æ ˆé¡¶å…ƒç´ å’Œå½“å‰å­—ç¬¦æ— æ³•åŒ¹é…ï¼Œåˆ™è¯´æ˜è¿™å¯¹æ‹¬å·ä¸åŒ¹é…ï¼Œä¸æ»¡è¶³é¢˜æ„ï¼Œå¯ç›´æ¥é€€å‡ºæ ¡éªŒå¹¶è¿”å›falseï¼ˆè¯´æ˜å³æ‹¬å·ä¸åŒ¹é…æˆ–è€…å³æ‹¬å·æ¯”è¾ƒå¤šï¼‰
     * - å½“æ‰€æœ‰çš„å­—ç¬¦æ ¡éªŒå®Œæˆï¼Œåˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœæ ˆä¸ä¸ºç©ºåˆ™è¯´æ˜å·¦æ‹¬å·è¿˜æœ‰å¤šä¹Ÿä¸æ»¡è¶³é¢˜æ„
     */
    public boolean isValid(String s) {
        // æ„å»ºå“ˆå¸Œè¡¨å­˜å‚¨æ‹¬å·åŒ¹é…å…³ç³»
        Map<Character, Character> map = new HashMap<>();
        map.put(')', '(');
        map.put(']', '[');
        map.put('}', '{');
        // æ„å»ºè¾…åŠ©æ ˆå­˜å‚¨å·¦æ‹¬å·
        Stack<Character> stack = new Stack<>();
        // éå†å­—ç¬¦ä¸²åºåˆ—ï¼Œæ ¡éªŒæ‹¬å·æ˜¯å¦åŒ¹é…
        for (int i = 0; i < s.length(); i++) {
            char cur = s.charAt(i);
            if (map.containsKey(cur)) {
                // è¯´æ˜æ˜¯éå·¦æ‹¬å·å­—ç¬¦ï¼Œåˆ™ä»æ ˆä¸­è¯»å–ï¼ˆå¼¹å‡ºï¼‰å…ƒç´ è¿›è¡ŒåŒ¹é…
                boolean valid = (!stack.isEmpty()) && (stack.pop() == map.get(cur));
                if (!valid) {
                    return false; // æ ¡éªŒä¸åŒ¹é…ï¼ˆå­˜åœ¨å³æ‹¬å·ä½†æ ˆä¸ºç©ºï¼Œæˆ–è€…æ ˆé¡¶å…ƒç´ å’Œå½“å‰æ‹¬å·ä¸åŒ¹é…ï¼‰
                }
            } else {
                // å·¦æ‹¬å·åˆ™æ­£å¸¸å…¥æ ˆ
                stack.push(cur);
            }
        }
        // åˆ¤æ–­å·¦æ‹¬å·æ˜¯å¦æœ‰å‰©ä½™,å¦‚æœæœ‰å‰©ä½™åˆ™ä¸åŒ¹é…
        return stack.isEmpty();
    }
}
