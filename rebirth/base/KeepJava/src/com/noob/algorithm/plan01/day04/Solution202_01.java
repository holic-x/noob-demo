package com.noob.algorithm.plan01.day04;

import com.noob.algorithm.dmsxl.graph.Pair;

import java.util.HashSet;
import java.util.Set;

/**
 * ğŸŸ¢202 å¿«ä¹æ•°
 */
public class Solution202_01 {


    /**
     * å¯¹äºä¸€ä¸ªæ­£æ•´æ•°ï¼Œæ¯ä¸€æ¬¡å°†è¯¥æ•°æ›¿æ¢ä¸ºå®ƒæ¯ä¸ªä½ç½®ä¸Šçš„æ•°å­—çš„å¹³æ–¹å’Œï¼Œé‡å¤è¿‡ç¨‹ç›´åˆ°æ•°å­—å˜ä¸º1
     * - å¦‚æœå˜ä¸º1åˆ™ä¸ºå¿«ä¹æ•°
     * - å¦‚æœä¸€ç›´å¾ªç¯ï¼Œåˆ™è¯´æ˜éå¿«ä¹æ•°
     * å®šä¹‰ä¸€ä¸ªé›†åˆå­˜å‚¨å¯èƒ½å‡ºç°çš„æ•°å­—é›†åˆï¼Œå¦‚æœå‘ç°æ•°ç»„å¾ªç¯å‡ºç°åˆ™è¯´æ˜ä¸ºéå¿«ä¹æ•°
     */
    public boolean isHappy(int n) {
        // æ„å»ºè¾…åŠ©é›†åˆå­˜å‚¨è®¡ç®—è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„å…ƒç´ 
        Set<Integer> set = new HashSet<>();
        if (n == 1) {
            return true;
        }
        // å½“nä¸ä¸º1ï¼Œä¸€ç›´è°ƒç”¨getNextæ–¹æ³•è·å–å¿«ä¹æ•°
        while (n != 1) {
            if (set.contains(n)) {
                return false; // å‡ºç°å¾ªç¯
            }
            // å°†éå†å…ƒç´ åŠ å…¥ç»“æœé›†ï¼Œå¹¶è®¡ç®—ä¸‹ä¸€ä¸ªæ•°ï¼Œç›´åˆ°å‡ºç°1æˆ–è€…å¾ªç¯æ•°å­—å‡ºç°
            set.add(n);
            n = getNext(n);
        }

        // å¾ªç¯è·³å‡ºè¯´æ˜å‡ºç°äº†n=1ï¼Œæ»¡è¶³å¿«ä¹æ•°è¦æ±‚
        return true;

    }

    /**
     * æ ¹æ®å…ƒç´ xè·å–å…¶ä¸‹ä¸€ä¸ªå…ƒç´ ï¼ˆå³xä¼šè¢«æ›¿æ¢ä¸ºæ¯ä¸ªä½ç½®ä¸Šçš„æ•°å­—çš„å¹³æ–¹å’Œï¼‰
     * 1.æ•°ä½åˆ†ç¦»
     * 2.å­—ç¬¦ä¸²è½¬åŒ–éå†å¤„ç†
     */
    public static int getNext(int x) {
        int next = 0;
        // æ•°å­¦æ“ä½œï¼šå¯¹10æ±‚ä½™å–å¾—å°¾æ•°ï¼Œç„¶åä¸‹ä¸€æ­¥é™¤ä»¥10å–å‡ºå°¾æ•°è¿›å…¥ä¸‹ä¸€æ­¥è®¡ç®—ï¼Œç›´åˆ°å€¼ä¸º0
        while (x != 0) { // æˆ–è€…while(x>0)
            int mod = x % 10; // è·å–å°¾æ•°
            next += mod * mod;// ç´¯åŠ æ•°å­—å¯¹åº”çš„å¹³æ–¹
            x = x / 10; // å–å‡ºå°¾æ•°ï¼Œè®¡ç®—ä¸‹ä¸€ä¸ªæ•°ä½
        }
        // è¿”å›å¾—åˆ°çš„ä¸‹ä¸€ä¸ªæ•°å­—
        return next;
    }

    public static void main(String[] args) {
        System.out.println(Solution202_01.getNext(12));
    }


}
