package com.noob.algorithm.plan_archive.plan02.hot100.day08.p026;


/**
 * ğŸŸ¡ 494 ç›®æ ‡å’Œ - https://leetcode.cn/problems/target-sum/description/
 */
public class Solution494_01 {
    /**
     * æ€è·¯åˆ†æï¼šç»™å®šè¦ç»™æ•°ç»„ï¼Œå¯ä»¥åœ¨å…ƒç´ å‰åŠ å…¥ç¬¦å·+/-ç„¶åä¸²è”èµ·æ¥å¾—åˆ°è¡¨è¾¾å¼ï¼Œè¿”å›é€šè¿‡ä¸Šè¿°æ–¹æ³•æ„é€ çš„è¿ç®—ç»“æœä¸ºtargetçš„ä¸åŒè¡¨è¾¾å¼æ•°ç›®
     * åŠ¨æ€è§„åˆ’æ€è·¯ï¼š0-1 èƒŒåŒ…é—®é¢˜
     * left-right=targetã€left+right=sum =ã€‹ left = (sum+target)/2
     */
    public int findTargetSumWays(int[] nums, int target) {

        // è®¡ç®—å…ƒç´ ç´¯åŠ å’Œ
        int sum = 0;
        for (int num : nums) {
            sum += num;
        }
        int left = (target + sum) / 2;

        // ç‰¹ä¾‹åˆ¤æ–­
        // â‘  å¦‚æœtarget+sumä¸ºå¥‡æ•°åˆ™æ²¡æœ‰æ–¹æ¡ˆ
        if ((target + sum) % 2 == 1) return 0;

        // â‘¡ å¦‚æœtargetçš„ç»å¯¹å€¼å¤§äºsumï¼Œåˆ™åŸºäºç°æœ‰çš„å…ƒç´ æ— æ³•æ„æˆå’Œä¸ºtarget
        if (Math.abs(target) > sum) return 0;


        // åŠ¨æ€è§„åˆ’æ±‚è§£
        // 1.dp[i][j] è¡¨ç¤ºä½¿ç”¨[0,i]çš„ç‰©å“èƒ½å¤Ÿå‡‘æ»¡å®¹é‡ä¸ºjçš„èƒŒåŒ…å…±æœ‰å¤šå°‘ç§æ–¹æ³•
        int m = nums.length, n = left + 1;
        int[][] dp = new int[m][n];

        /**
         * 2.dpé€’æ¨ï¼šæ ¹æ®å½“å‰èƒŒåŒ…å®¹é‡æ˜¯å¦å¯ä»¥æ”¾ä¸‹ç‰©å“åˆ†æƒ…å†µè®¨è®º
         * - æ”¾ä¸ä¸‹ç‰©å“iï¼šç»§æ‰¿ä¸Šä¸€çŠ¶æ€ dp[i][j] = dp[i-1][j]
         * - å¯ä»¥æ”¾ä¸‹ç‰©å“iï¼šé€‰æ‹©æ”¾æˆ–è€…ä¸æ”¾ï¼Œå¾—åˆ°ä¸¤ç§æƒ…å†µä¸‹çš„æ–¹æ¡ˆæ•°ä¹‹å’Œ dp[i][j] = dp[i-1][j] + dp[i-1][j-nums[i]]
         */

        // 3.dp åˆå§‹åŒ–
        // é¦–è¡Œåˆå§‹åŒ–ï¼šdp[0][j] è¡¨ç¤ºæ”¾å…¥ç‰©å“0æ°å¥½å¯ä»¥å‡‘æ»¡å®¹é‡jæœ‰å¤šå°‘ç§æ–¹æ³•ï¼ˆåªæœ‰j==nums[0]çš„æƒ…å†µä¸‹æ‰èƒ½å‡‘æ»¡ï¼‰
        for (int j = 0; j < n; j++) {
            dp[0][j] = (j == nums[0] ? 1 : 0);
        }
        // é¦–åˆ—åˆå§‹åŒ–ï¼šdp[i][0] è¡¨ç¤ºæ”¾å…¥ç‰©å“iæ°å¥½å¯ä»¥å‡‘æ»¡å®¹é‡0æœ‰å¤šå°‘ç§æ–¹æ³•ï¼ˆåªæœ‰nums[i]==0æ‰æ»¡è¶³,ä½†éœ€è®¨è®ºæ”¾ã€ä¸æ”¾çš„æƒ…å†µï¼‰
        int zeroNum = 0; // ç»Ÿè®¡0çš„ä¸ªæ•°
        for (int i = 0; i < m; i++) {
            if (nums[i] == 0) {
                zeroNum++;
            }
            // æ ¹æ®ç›®å‰0çš„ä¸ªæ•°æ¥å†³å®šæ–¹æ¡ˆæ•°
            dp[i][0] = (int) Math.pow(2, zeroNum);
        }

        // 4.dp æ„å»º
        for (int i = 1; i < m; i++) {
            for (int j = 1; j < n; j++) {
                if (j >= nums[i]) {
                    dp[i][j] = dp[i - 1][j] + dp[i - 1][j - nums[i]];
                } else {
                    dp[i][j] = dp[i - 1][j];
                }
            }
        }

        // è¿”å›ç»“æœ
        return dp[m - 1][left];

    }
}